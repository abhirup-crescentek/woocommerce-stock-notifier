"use strict";jQuery(function(i){var e={init:function(){i(document).on("click",".subscribe_button",this.subscribe_form),i(document).on("click",".unsubscribe_button",this.unsubscribe_form),i(".single_variation_wrap").on("show_variation",this.perform_upon_show_variation)},perform_upon_show_variation:function(e,s){var t=s.variation_id;i(".stock_notifier-subscribe-form").hide(),i(".stock_notifier-subscribe-form-"+t).show()},is_email:function(i){return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(i)},unsubscribe_form:function(e){e.preventDefault(),i(this).text(wcsn_data.processing),i(this).addClass("stk_disabled");var s=i(this).closest(".stock_notifier-subscribe-form"),t={action:"unsubscribe_button",customer_email:s.find(".subscribed_email").val(),product_id:s.find(".product_id").val(),var_id:s.find(".variation_id").val()},r=wcsn_data.subscription_unsubscribe;r=r.replace("%customer_email%",t.customer_email),i.post(wcsn_data.ajax_url,t,function(e){i(this).removeClass("stk_disabled"),!0==e?i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+r+"</div>"):i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+wcsn_data.error_occurs+'<a href="'+window.location+'"> '+wcsn_data.try_again+"</a></div>")})},subscribe_form:function(s){s.preventDefault(),i(this).text(wcsn_data.processing),i(this).addClass("stk_disabled");var t=wcsn_data.recaptcha_enabled,r=i(this).closest(".stock_notifier-subscribe-form");if(t){var a=r.find("#recaptchav3_secretkey").val(),c=r.find("#recaptchav3_response").val();i.post(wcsn_data.ajax_url,{action:"recaptcha_validate_ajax",captcha_secret:a,captcha_response:c},function(s){1==s?e.process_form(r.find(".stock_notifier_email").val(),r.find(".current_product_id").val(),r.find(".current_variation_id").val(),r.find(".current_product_name").val()):(alert("Oops, recaptcha not varified!"),i(this).removeClass("stk_disabled"))})}else e.process_form(r.find(".stock_notifier_email").val(),r.find(".current_product_id").val(),r.find(".current_variation_id").val(),r.find(".current_product_name").val())},process_form:function(s,t,r,a){var c=wcsn_data.description_text_html,n=wcsn_data.subscription_button_html,o=wcsn_data.subscription_success,d=wcsn_data.subscription_email_exist,l=wcsn_data.subscription_invalid_email,u=wcsn_data.ban_email_domain_text,p=wcsn_data.ban_email_address_text,f=wcsn_data.double_opt_in_success,m=wcsn_data.unsubscribe_button_html,b=wcsn_data.subscribe_form_field,o=o.replace("%product_title%",a),o=o.replace("%customer_email%",s),d=d.replace("%product_title%",a),d=d.replace("%customer_email%",s);if(s&&e.is_email(s)){i(this).toggleClass("alert_loader").blur();for(var v={action:"subscribe_ajax",email:s,product_id:t,variation_id:r},h=0;h<wcsn_data.additional_fields.length;h++)v[wcsn_data.additional_fields[h]]=i(this).parent().find("."+wcsn_data.additional_fields[h]).val();i.post(wcsn_data.ajax_url,v,function(e){"0"==e?i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+wcsn_data.error_occurs+'<a href="'+window.location+'"> '+wcsn_data.try_again+"</a></div>"):"/*?%already_registered%?*/"==e?i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+d+"</div>"+m+'<input type="hidden" class="subscribed_email" value="'+s+'" /><input type="hidden" class="product_id" value="'+t+'" /><input type="hidden" class="variation_id" value="'+r+'" />'):"/*?%ban_email_address%?*/"==e?i(".stock_notifier-subscribe-form").html(c+'<div class="wcsn_fields_wrap">'+b+n+'</div><p class="wc_stock_notifier_error_message ban_email_address">'+p+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />'):"/*?%ban_email_domain%?*/"==e?i(".stock_notifier-subscribe-form").html(c+'<div class="wcsn_fields_wrap">'+b+n+'</div><p class="wc_stock_notifier_error_message ban_email_domin">'+u+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />'):"/*?%double_opt_in%?*/"==e?i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+f+"</div>"):i(".stock_notifier-subscribe-form").html('<div class="registered_message">'+o+"</div>")})}else i(".stock_notifier-subscribe-form").html(c+'<div class="wcsn_fields_wrap">'+b+n+'</div><p style="color:#e2401c;" class="wc_stock_notifier_error_message">'+l+'</p><input type="hidden" class="current_product_id" value="'+t+'" /> <input type="hidden" class="current_variation_id" value="'+r+'" /><input type="hidden" class="current_product_name" value="'+a+'" />');i(this).removeClass("stk_disabled")}};e.init()});